# Cost Analysis

Compares the old `citycoins/contract` implementation against the new `citycoins/protocol` implementation with cost details for each function.

Last updated: 2022-12-23

## Mining

```
├────────────────────────────────────────┼───────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│                                        │ # Calls   │ Runtime (units)              │ Read Count             │ Read Length (bytes)      │ Write Count           │ Write Length (bytes)    │ Tx per Block │
├────────────────────────────────────────┼───────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ mine-many                              │        15 │  min:   37032000   (0.741%)  │  min:     6  (0.040%)  │  min:   33775  (0.034%)  │  min:    0  (0.000%)  │  min:      0  (0.000%)  │          135 │
│ (citycoins-core-v2)                    │           │  max:  519093000  (10.382%)  │  max:  1217  (8.113%)  │  max:  106914  (0.107%)  │  max:  304  (2.027%)  │  max:  46148  (0.308%)  │            9 │
│                                        │           │  avg:   79580066   (1.592%)  │  avg:   114  (0.760%)  │  avg:   40292  (0.040%)  │  avg:   26  (0.173%)  │  avg:   3959  (0.026%)  │          100 │
├────────────────────────────────────────┼───────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ mine                                   │       233 │  min:   15680000   (0.314%)  │  min:     7  (0.047%)  │  min:  12354  (0.012%)   │  min:    0  (0.000%)  │  min:      0  (0.000%)  │          318 │
│ (citycoins-protocol)                   │           │  max:  568822000  (11.376%)  │  max:  1027  (6.847%)  │  max:  73127  (0.073%)   │  max:  601  (4.007%)  │  max:  88601  (0.591%)  │            8 │
│                                        │           │  avg:   40998828   (0.820%)  │  avg:    42  (0.280%)  │  avg:  26572  (0.027%)   │  avg:   10  (0.067%)  │  avg:   1431  (0.010%)  │          139 │
├────────────────────────────────────────┼───────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
```

## Mining Claims

```
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│                                        │ # Calls  │ Runtime (units)              │ Read Count             │ Read Length (bytes)      │ Write Count           │ Write Length (bytes)    │ Tx per Block │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ claim-mining-reward                    │       22 │    min:  29904000  (0.598%)  │    min:   5  (0.033%)  │   min:  29834  (0.030%)  │    min:  0  (0.000%)  │    min:    0  (0.000%)  │          167 │
│ (citycoins-core-v2)                    │          │    max:  98533000  (1.971%)  │    max:  32  (0.213%)  │   max:  58658  (0.059%)  │    max:  5  (0.033%)  │    max:  459  (0.003%)  │           50 │
│                                        │          │    avg:  80588590  (1.612%)  │    avg:  25  (0.167%)  │   avg:  49940  (0.050%)  │    avg:  3  (0.020%)  │    avg:  312  (0.002%)  │           77 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ claim-mining-reward                    │      216 │    min:  12450000  (0.249%)  │    min:   7  (0.047%)  │   min:  12354  (0.012%)  │    min:  0  (0.000%)  │    min:    0  (0.000%)  │          401 │
│ (citycoins-protocol)                   │          │    max:  68049000  (1.361%)  │    max:  49  (0.327%)  │   max:  56339  (0.056%)  │    max:  6  (0.040%)  │    max:  477  (0.003%)  │           73 │
│                                        │          │    avg:  47563976  (0.951%)  │    avg:  36  (0.240%)  │   avg:  40318  (0.040%)  │    avg:  3  (0.020%)  │    avg:  243  (0.002%)  │          126 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ is-block-winner                        │        7 │    min:  30936000  (0.619%)  │    min:   4  (0.027%)  │   min:  29965  (0.030%)  │    min:  0  (0.000%)  │      min:  0  (0.000%)  │          161 │
│ (citycoins-core-v2)                    │          │    max:  70000000  (1.400%)  │    max:  12  (0.080%)  │   max:  33812  (0.034%)  │    max:  0  (0.000%)  │      max:  0  (0.000%)  │           71 │
│                                        │          │    avg:  48342142  (0.967%)  │    avg:   8  (0.053%)  │   avg:  32222  (0.032%)  │    avg:  0  (0.000%)  │      avg:  0  (0.000%)  │          119 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ is-block-winner                        │        2 │    min:  17057000  (0.341%)  │    min:  15  (0.100%)  │   min:  15449  (0.015%)  │    min:  0  (0.000%)  │      min:  0  (0.000%)  │          293 │
│ (citycoins-protocol)                   │          │    max:  19157000  (0.383%)  │    max:  16  (0.107%)  │   max:  15450  (0.015%)  │    max:  0  (0.000%)  │      max:  0  (0.000%)  │          261 │
│                                        │          │    avg:  18107000  (0.362%)  │    avg:  15  (0.100%)  │   avg:  15449  (0.015%)  │    avg:  0  (0.000%)  │      avg:  0  (0.000%)  │          277 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
```

## Stacking

```
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│                                        │ # Calls  │ Runtime (units)              │ Read Count             │ Read Length (bytes)      │ Write Count           │ Write Length (bytes)    │ Tx per Block │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ stack-tokens                           │       77 │   min:   31035000  (0.621%)  │    min:   8  (0.053%)  │   min:  30003  (0.030%)  │   min:   0  (0.000%)  │   min:     0  (0.000%)  │          161 │
│ (citycoins-core-v2)                    │          │   max:  103502000  (2.070%)  │    max:  85  (0.567%)  │   max:  43333  (0.043%)  │   max:  22  (0.147%)  │   max:  2621  (0.017%)  │           48 │
│                                        │          │   avg:   92918000  (1.858%)  │    avg:  62  (0.413%)  │   avg:  41410  (0.041%)  │   avg:  12  (0.080%)  │   avg:  1325  (0.009%)  │           57 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ stack                                  │       16 │   min:   12822000  (0.256%)  │  min:    7  (0.047%)   │  min:  12706  (0.013%)   │  min:   0  (0.000%)   │  min:      0  (0.000%)  │          389 │
│ (citycoins-protocol)                   │          │   max:  165831000  (3.317%)  │  max:  172  (1.147%)   │  max:  60699  (0.061%)   │  max:  69  (0.460%)   │  max:  10044  (0.067%)  │           30 │
│                                        │          │   avg:   67389062  (1.348%)  │  avg:   46  (0.307%)   │  avg:  41269  (0.041%)   │  avg:   9  (0.060%)   │  avg:   1242  (0.008%)  │          118 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤

```

## Stacking Claims

```
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│                                        │ # Calls  │ Runtime (units)              │ Read Count             │ Read Length (bytes)      │ Write Count           │ Write Length (bytes)    │ Tx per Block │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ claim-stacking-reward                  │        8 │    min:  34742000  (0.695%)  │    min:   7  (0.047%)  │   min:  33866  (0.034%)  │    min:  0  (0.000%)  │    min:    0  (0.000%)  │          143 │
│ (citycoins-core-v2)                    │          │    max:  48193000  (0.964%)  │    max:  21  (0.140%)  │   max:  44734  (0.045%)  │    max:  4  (0.027%)  │    max:  163  (0.001%)  │          103 │
│                                        │          │    avg:  40531375  (0.811%)  │    avg:  15  (0.100%)  │   avg:  38171  (0.038%)  │    avg:  1  (0.007%)  │    avg:   60  (0.000%)  │          125 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ claim-stacking-reward                  │        9 │    min:  12808000  (0.256%)  │    min:   7  (0.047%)  │   min:  12706  (0.013%)  │    min:  0  (0.000%)  │    min:    0  (0.000%)  │          390 │
│ (citycoins-protocol)                   │          │    max:  58188000  (1.164%)  │    max:  48  (0.320%)  │   max:  50177  (0.050%)  │    max:  4  (0.027%)  │    max:  174  (0.001%)  │           85 │
│                                        │          │    avg:  29873000  (0.597%)  │    avg:  22  (0.147%)  │   avg:  27846  (0.028%)  │    avg:  0  (0.000%)  │    avg:   19  (0.000%)  │          202 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ get-stacking-reward                    │        2 │    min:  30967000  (0.619%)  │     min:  8  (0.053%)  │   min:  30098  (0.030%)  │    min:  0  (0.000%)  │      min:  0  (0.000%)  │          161 │
│ (citycoins-core-v2)                    │          │    max:  30902000  (0.618%)  │     max:  8  (0.053%)  │   max:  30098  (0.030%)  │    max:  0  (0.000%)  │      max:  0  (0.000%)  │          161 │
│                                        │          │    avg:  30934500  (0.619%)  │     avg:  8  (0.053%)  │   avg:  30098  (0.030%)  │    avg:  0  (0.000%)  │      avg:  0  (0.000%)  │          161 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
│ get-stacking-reward                    │        4 │    min:  20748000  (0.415%)  │    min:  10  (0.067%)  │   min:  20187  (0.020%)  │    min:  0  (0.000%)  │      min:  0  (0.000%)  │          240 │
│                                        │          │    max:  21222000  (0.424%)  │    max:  11  (0.073%)  │   max:  20204  (0.020%)  │    max:  0  (0.000%)  │      max:  0  (0.000%)  │          235 │
│                                        │          │    avg:  21011000  (0.420%)  │    avg:  10  (0.067%)  │   avg:  20199  (0.020%)  │    avg:  0  (0.000%)  │      avg:  0  (0.000%)  │          237 │
├────────────────────────────────────────┼──────────┼──────────────────────────────┼────────────────────────┼──────────────────────────┼───────────────────────┼─────────────────────────┼──────────────┤
```
